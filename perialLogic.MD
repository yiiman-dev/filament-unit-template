
# منطق کسب و کار پروژه فیلامنت

## مدیریت کاربران و احراز هویت

1. **ثبت نام و تایید کاربران**
   - کاربران با شماره موبایل و کد ملی ثبت نام می‌کنند
   - تایید هویت از طریق ارسال کد یکبار مصرف به موبایل
   - کاربران دارای وضعیت (فعال، غیرفعال) و وضعیت اعتبارسنجی هستند

2. **انواع کاربران و پنل‌ها**
   - سه پنل مجزا: My (کاربران عادی)، Manage (مدیران)، Admin (مدیران ارشد)
   - هر پنل دارای مجموعه دسترسی و ویژگی‌های خاص خود است
   - نقش کاربران، سطح دسترسی آنها را در پنل‌ها تعیین می‌کند

## مدیریت بنگاه‌های اقتصادی

1. **فرآیند ثبت بنگاه**
   - بنگاه‌ها اطلاعات ثبت خود را با کد ملی، نام و نوع بنگاه ارائه می‌دهند
   - ثبت‌نام شامل اطلاعات مدیرعامل (کد ملی، نام، شماره موبایل) است
   - زمینه فعالیت باید در هنگام ثبت‌نام مشخص شود
   - ثبت‌نام وارد جریان کاری تایید می‌شود

2. **جریان کاری تایید بنگاه**
   - ثبت‌نام‌های در انتظار، منتظر بررسی مدیریتی هستند
   - مدیران می‌توانند ثبت‌نام‌ها را تایید یا رد کنند
   - پس از تایید، یک بنگاه اقتصادی ایجاد می‌شود
   - مدیرعامل به صورت خودکار یک حساب کاربری با دسترسی به بنگاه دریافت می‌کند

3. **کنترل دسترسی بنگاه**
   - کاربران می‌توانند با چندین بنگاه ارتباط داشته باشند
   - هر ارتباط دارای نقش مشخصی است (مدیرعامل، مدیر، معاون و غیره)
   - دسترسی می‌تواند با تاریخ انقضا محدود شود
   - حذف نرم، سوابق دسترسی تاریخی را حفظ می‌کند

4. **انتخاب بنگاه توسط کاربر**
   - کاربران با چندین ارتباط بنگاهی، می‌توانند بنگاه مورد نظر خود را انتخاب کنند
   - انتخاب در جلسه کاری برای مدت استفاده حفظ می‌شود
   - کاربران می‌توانند بدون نیاز به احراز هویت مجدد بین بنگاه‌ها جابجا شوند

## ردیابی فعالیت و حسابرسی

1. **پیگیری تغییرات**
   - تمام رکوردها فیلدهای ایجاد شده توسط و به‌روزرسانی شده توسط را نگهداری می‌کنند
   - حذف نرم با ردیابی توسط چه کسی حذف شده
   - ردیابی زمان برای تمام عملیات‌ها

2. **سیستم اطلاع‌رسانی**
   - اطلاع‌رسانی پیامکی برای تغییرات وضعیت مهم
   - هم کاربران و هم مدیران بنگاه، اطلاعیه‌های مربوطه را دریافت می‌کنند
   - ترجیحات اطلاع‌رسانی قابل تنظیم

## مدیریت وضعیت بنگاه

1. **چرخه حیات بنگاه**
   - بنگاه‌ها دارای وضعیت‌های قابل تعریف هستند (فعال، غیرفعال)
   - تغییرات وضعیت بر مجوزهای دسترسی کاربر تأثیر می‌گذارد
   - ردیابی وضعیت تاریخی برای اهداف حسابرسی

2. **رابطه کاربر-بنگاه**
   - کاربران می‌توانند دسترسی محدود به زمان به بنگاه‌ها داشته باشند
   - نقش‌ها، مجوزها را در بستر بنگاه تعریف می‌کنند
   - روابط می‌توانند در صورت نیاز لغو شوند (حذف نرم)
   - مدیرعامل‌ها دسترسی دائمی بدون انقضا دارند

## ارتباطات پیامکی

1. **استراتژی اطلاع‌رسانی**
   - سیستم برای تغییرات حساب و به‌روزرسانی‌های دسترسی بنگاه پیامک ارسال می‌کند
   - کدهای تأیید برای احراز هویت ارسال می‌شوند
   - تغییرات وضعیت بنگاه باعث ارسال اطلاعیه به کاربران مربوطه می‌شود
   - اطلاع‌رسانی‌های پیامکی اختیاری برای اقدامات مدیریتی

## اعتبارسنجی و یکپارچگی داده‌ها

1. **مدیریت شماره موبایل**
   - شماره‌های موبایل به فرمت استاندارد نرمال‌سازی می‌شوند
   - اعتبارسنجی قبل از نرمال‌سازی انجام می‌شود
   - جلوگیری از تکرار در روابط کاربر-بنگاه
   - یکتایی روابط توسط محدودیت‌های پایگاه داده اعمال می‌شود

2. **قوانین کسب و کار**
   - کاربران نمی‌توانند دوبار به یک بنگاه اضافه شوند
   - دسترسی منقضی شده به طور خودکار از ورود به پنل بنگاه جلوگیری می‌کند
   - رکوردهای حذف شده نرم می‌توانند با مجوزهای مناسب بازیابی شوند
   - وضعیت کاربر بر توانایی ورود آنها تأثیر می‌گذارد
